---
import MenuFooter from '#components/menu/menu-footer.astro';
import Container from '#components/parts/container.astro';
import DateCurrentYear from '#components/parts/date-current-year.astro';
import DateDisplay from '#components/parts/date-display.astro';
import DividedItem from '#components/parts/divided-item.astro';
import Link from '#components/parts/link.astro';
import { SITE_YEAR_FOUNDED } from '#constants.ts';
import { getTranslations } from '#lib/i18n/i18n-translations.ts';
import { getSiteUrl } from '#lib/utils/routing.ts';

const siteUrl = getSiteUrl();

const dateBuild = new Date();

const t = getTranslations();
---

<Container as="footer" class="mt-medium mb-medium w-full pt-4">
	<div
		class:list={[
			'border-t pt-small pb-medium',
			'border-primary-200 text-primary-400 dark:border-primary-700 dark:text-primary-700',
		]}
	>
		<MenuFooter />
		<nav
			class:list={[
				'flex flex-wrap gap-x-1 gap-y-2 font-sans text-xs',
				'text-primary-500 dark:text-primary-400',
			]}
			aria-label={t('site.colophon.label')}
		>
			<DividedItem dividerColor="lighter"
				><span class="text-primary-400 dark:text-primary-500">â€»</span>
				<span>{t('site.footer.updated.label')} <DateDisplay date={dateBuild} /></span></DividedItem
			>
			<DividedItem dividerColor="lighter"
				><span>
					&copy;{SITE_YEAR_FOUNDED}&ndash;<DateCurrentYear />
					<Link href={siteUrl} linkColor="accent">{t('site.title')}</Link></span
				>
			</DividedItem>
			<DividedItem dividerColor="lighter">
				<span
					>{t('site.footer.powered.label')}
					<Link href="https://astro.build" linkColor="accent">Astro</Link></span
				>
			</DividedItem>
			<DividedItem dividerColor="lighter">
				<Link href="https://github.com/xsynaptic/spectralcodex" linkColor="accent"
					>{t('site.footer.sourceCode.label')}</Link
				>
			</DividedItem>
			<DividedItem dividerColor="lighter">
				<Link
					href={`${getSiteUrl()}rss.xml`}
					linkColor="accent"
					class="group flex flex-nowrap items-center gap-1"
					rel="feed"
					><span>{t('site.footer.feed.label')}</span>
					<div class:list={['colophon-rss-icon relative', 'bg-white']}>
						<svg
							xmlns="http://www.w3.org/2000/svg"
							width="1em"
							height="1em"
							viewBox="0 0 24 24"
							class:list={[
								'absolute transition-colors duration-300',
								'text-orange-400 group-hover:text-orange-300 hover:text-orange-300',
							]}
							aria-labelledby="colophon-rss-icon"
							><path
								fill="currentColor"
								d="M5 3h14a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2m2.5 12A1.5 1.5 0 0 0 6 16.5A1.5 1.5 0 0 0 7.5 18A1.5 1.5 0 0 0 9 16.5A1.5 1.5 0 0 0 7.5 15M6 10v2a6 6 0 0 1 6 6h2a8 8 0 0 0-8-8m0-4v2a10 10 0 0 1 10 10h2A12 12 0 0 0 6 6"
							></path><title id="colophon-rss-icon">
								{t('site.footer.feed.label')}
							</title></svg
						>
					</div>
				</Link>
			</DividedItem>
		</nav>
	</div>
</Container>

<style>
	.colophon-rss-icon {
		margin-left: 0.5;
		height: 10px;
		width: 10px;
		svg {
			top: 50%;
			left: 50%;
			transform: translate(-50%, -50%);
			height: 16px;
			width: 16px;
		}
	}
</style>
