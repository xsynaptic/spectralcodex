---
import type { CoreImageAttributes, UnpicBaseImageProps } from '@unpic/core';
import type { HTMLAttributes } from 'astro/types';
import type { IPXOperations, IPXOptions } from 'unpic/providers/ipx';

import { Image } from '@unpic/astro/base';

import { signedIpxTransformer } from '#lib/image/image-server.ts';

// Props interface: same as unpic base but without transformer
type Props = HTMLAttributes<'img'> &
	Omit<UnpicBaseImageProps<IPXOperations, IPXOptions, CoreImageAttributes>, 'transformer'>;

// Helpful for validating prop types in other components
export type ImageComponentProps = Props;

const props = Astro.props;
---

<Image {...props} transformer={signedIpxTransformer} />
