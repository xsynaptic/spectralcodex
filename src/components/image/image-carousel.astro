---
import type { ImageFeaturedWithCaption } from '#lib/metadata/metadata-types.ts';

import ImageCarouselItem from '#components/image/image-carousel-item.astro';
import ImageCarouselNavigation from '#components/image/image-carousel-navigation.astro';

interface Props {
	imageFeaturedGroup?: Array<ImageFeaturedWithCaption> | undefined;
	class?: string | undefined;
}

const { imageFeaturedGroup, class: className } = Astro.props;
const carouselId = `carousel-${Math.random().toString(36).slice(2, 9)}`;
---

{
	imageFeaturedGroup && imageFeaturedGroup.length > 0 ? (
		<div
			class:list={['group relative max-w-content overflow-hidden sm:rounded-xs', className]}
			data-carousel-id={carouselId}
		>
			<div class="carousel-container">
				{imageFeaturedGroup.map((imageFeaturedGroupItem) => (
					<ImageCarouselItem {...imageFeaturedGroupItem} />
				))}
			</div>
			{imageFeaturedGroup.length > 1 && <ImageCarouselNavigation carouselId={carouselId} />}
		</div>
	) : undefined
}
