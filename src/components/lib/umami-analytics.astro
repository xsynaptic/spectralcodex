---
import type { HTMLAttributes } from 'astro/types';

interface Props extends HTMLAttributes<'script'> {
	id: string | undefined;
	domain: string | undefined;
	isProduction: boolean;
	isViewTransitionsEnabled: boolean;
}

const { id, domain, isProduction, isViewTransitionsEnabled, ...props } = Astro.props;
---

{
	isProduction && id && domain ? (
		<script
			defer
			src={`${domain}/script.js`}
			data-website-id={id}
			{...props}
			{...(isViewTransitionsEnabled ? { 'data-astro-rerun': '' } : {})}
			is:inline
		/>
	) : undefined
}
