---
import * as R from 'remeda';

import LocationsTableComponent from '#components/locations/locations-table.astro';
import { getTheaterLocations } from '#lib/collections/locations/locations-utils-theaters.ts';

interface Props {
	tableId?: string;
}

const { tableId } = Astro.props;

const theaterLocations = await getTheaterLocations();

const isIdValid = (tableId: unknown): tableId is keyof typeof theaterLocations =>
	!!tableId && typeof tableId === 'string' && R.isIncludedIn(tableId, R.keys(theaterLocations));

if (!isIdValid(tableId)) {
	throw new Error(`[Locations Table] Invalid location query id: ${String(tableId)}`);
}
---

<LocationsTableComponent locations={theaterLocations[tableId]} />
