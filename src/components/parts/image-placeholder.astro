---
import type { HTMLTag, Polymorphic } from 'astro/types';

/**
 * A standardized image placeholder component with a fallback image when no placeholder is passed
 */
type Props<Tag extends HTMLTag = HTMLTag> = Polymorphic<{
	as: Tag;
	class?: string | undefined;
	placeholder?: string | undefined;
}>;

const { as: Tag = 'div', class: className, placeholder, ...props } = Astro.props;
---

<Tag
	class:list={[
		placeholder ? 'bg-(image:--img-placeholder) bg-cover bg-center' : 'bg-fallback',
		className,
	]}
	style={placeholder
		? `image-rendering: pixelated; --img-placeholder: url(${placeholder})`
		: undefined}
	{...props}
>
	<slot />
</Tag>
