---
import type { HTMLTag, Polymorphic } from 'astro/types';

import type { MultilingualContent } from '#lib/i18n/i18n-types.ts';

import TextParenthesis from '#components/parts/text-parenthesis.astro';

type Props<Tag extends HTMLTag = HTMLTag> = Polymorphic<{
	as: Tag;
	class?: string | undefined;
	content?: MultilingualContent | undefined;
	additional?: Array<MultilingualContent> | undefined;
	parenthesis?: boolean | undefined;
}>;

const {
	as: Tag = 'span',
	class: className,
	content,
	additional,
	parenthesis = false,
	...props
} = Astro.props;
---

{
	content ? (
		<>
			{parenthesis ? (
				<TextParenthesis as={Tag} class={className}>
					<Tag lang={content.lang} {...props}>
						<Fragment set:html={content.value} />
					</Tag>
				</TextParenthesis>
			) : (
				<>
					<Tag lang={content.lang} class={className} {...props}>
						<Fragment set:html={content.value} />
					</Tag>
					{additional?.map((item) => (
						<>
							{'\uFF0F'}
							<Tag lang={item.lang} class={className} {...props}>
								<Fragment set:html={item.value} />
							</Tag>
						</>
					))}
				</>
			)}
		</>
	) : undefined
}
