---
import { wrapCjk } from '@spectralcodex/unified-tools';

import type { LanguageCode } from '#lib/i18n/i18n-types.ts';

interface Props {
	langCode?: Extract<LanguageCode, 'zh-Hant' | 'zh-Hans' | 'ja' | 'ko'> | undefined;
}

const { langCode } = Astro.props;

const slotContents = (await Astro.slots.render('default')) as string | undefined;

const output = wrapCjk({
	input: slotContents ?? '',
	...(langCode
		? { wrapCjkOptions: { langCode: langCode.startsWith('zh') ? 'zh' : langCode } }
		: {}),
});
---

{output ? <Fragment set:html={output} /> : undefined}
