---
import { wrapCjk } from '@spectralcodex/unified-tools';

import type { LanguageCode } from '#lib/i18n/i18n-types.ts';

import { renderSlot } from '#lib/utils/astro.ts';

interface Props {
	langCode?: Extract<LanguageCode, 'zh' | 'zh-CN' | 'ja' | 'ko'> | undefined;
}

const { langCode } = Astro.props;

const slotContents = await renderSlot(Astro.slots, 'default');

const output = wrapCjk({
	input: slotContents ?? '',
	...(langCode
		? { wrapCjkOptions: { langCode: langCode.startsWith('zh') ? 'zh' : langCode } }
		: {}),
});
---

{output ? <Fragment set:html={output} /> : undefined}
