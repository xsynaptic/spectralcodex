---
import type { Page } from 'astro';

import type { MetadataGridOptions } from '#components/types.ts';
import type { ContentMetadataItem } from '#lib/metadata/metadata-types.ts';

import ContentSection from '#components/content/content-section.astro';
import MetadataGrid from '#components/parts/metadata-grid.astro';
import Pagination from '#components/parts/pagination.astro';
import { getTranslations } from '#lib/i18n/i18n-translations.ts';

interface Props {
	items?: Array<ContentMetadataItem>;
	page?: Page<ContentMetadataItem>;
	metadataGridOptions?: MetadataGridOptions | undefined;
}

const { items, page, metadataGridOptions, ...props } = Astro.props;

const defaultPreviewItemProps: MetadataGridOptions = {
	showDate: true,
	showRegion: true,
	showTitleMultilingual: true,
};

const hasItems = items && items.length > 0;

const t = getTranslations();
---

{
	hasItems || page ? (
		<ContentSection data-pagefind-ignore data-nosnippet {...props}>
			<Fragment slot="section-title">{t('content.section.content')}</Fragment>
			{page ? (
				<>
					<MetadataGrid items={page.data} {...defaultPreviewItemProps} {...metadataGridOptions} />
					<Pagination class="mt-small md:mt-medium" page={page} />
				</>
			) : undefined}
			{hasItems ? <MetadataGrid items={items} {...metadataGridOptions} /> : undefined}
		</ContentSection>
	) : undefined
}
