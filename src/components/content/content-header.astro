---
import Container from '#components/parts/container.astro';
import TextGradient from '#components/parts/text-gradient.astro';
import { renderSlot } from '#lib/utils/astro.ts';

interface Props {
	class?: string | undefined;
	hasHeroImage?: boolean | undefined;
}

const { class: className, hasHeroImage } = Astro.props;

const title = await renderSlot(Astro.slots, 'header-title');
const titleMultilingual = await renderSlot(Astro.slots, 'header-title-multilingual');
const titleInfo = await renderSlot(Astro.slots, 'header-title-info');
const subtitle = await renderSlot(Astro.slots, 'header-subtitle');
const caption = await renderSlot(Astro.slots, 'header-caption');
---

<Container
	as="div"
	class:list={[
		hasHeroImage
			? 'flex flex-col justify-end pt-2 sm:absolute sm:right-0 sm:bottom-0 sm:left-0 sm:z-30 sm:mb-0 sm:pt-0'
			: 'mb-2 pt-small',
		className,
	]}
>
	{
		titleMultilingual ? (
			<TextGradient
				as="h2"
				gradientColor={hasHeroImage ? 'accent-featured' : 'accent'}
				class:list={[
					'pb-1 text-base leading-snug font-medium sm:font-semibold',
					hasHeroImage
						? 'text-lg sm:-mb-1 sm:drop-shadow-xs md:text-xl lg:text-2xl'
						: 'text-lg md:text-xl lg:text-2xl',
				]}
				style={{ marginLeft: '-0.125rem' }}
				data-pagefind-weight="2"
			>
				<Fragment set:html={titleMultilingual} />
			</TextGradient>
		) : undefined
	}
	<div class="flex-wrap items-start justify-between gap-1 bg-clip-padding pb-0 sm:flex sm:pb-2">
		<TextGradient
			as="h1"
			gradientColor={hasHeroImage ? 'primary-featured' : 'primary'}
			class:list={[
				'pb-2 font-display text-2xl leading-[1.125] font-semibold',
				hasHeroImage
					? '-mb-1 sm:-mb-3 sm:text-3xl sm:drop-shadow-sm md:text-4xl lg:text-5xl'
					: 'mb-0 sm:-mb-2 md:text-3xl lg:text-4xl',
			]}
			style={{ marginLeft: '-0.125rem' }}
			data-pagefind-weight="3"
		>
			{title ? <Fragment set:html={title} /> : undefined}
		</TextGradient>
		{
			titleInfo ? (
				<div class="self-end pb-0 sm:pb-2" data-pagefind-ignore>
					<Fragment set:html={titleInfo} />
				</div>
			) : undefined
		}
	</div>
	{
		subtitle || caption ? (
			<div
				class:list={[
					'items-start gap-1 pb-2 text-sm sm:flex sm:flex-wrap',
					hasHeroImage
						? 'text-primary-500 sm:text-primary-300 dark:text-primary-400 dark:sm:text-primary-300'
						: 'text-primary-500 dark:text-primary-400',
				]}
				data-pagefind-ignore
			>
				{subtitle ? <Fragment set:html={subtitle} /> : undefined}
				{caption ? (
					<div class="flex flex-1 flex-nowrap items-end justify-end gap-1">
						<Fragment set:html={caption} />
					</div>
				) : undefined}
			</div>
		) : undefined
	}
</Container>
