---
import type { GetStaticPaths, InferGetStaticPropsType } from 'astro';

import { FEATURE_DATE_ARCHIVES } from '#constants.ts';
import TimelineMonthly from '#layouts/timeline-monthly.astro';
import { getTimelineData } from '#lib/timeline/timeline-data.ts';

export const getStaticPaths = (async () => {
	if (!FEATURE_DATE_ARCHIVES) return [];

	const { timelineMonthly, timelineYears } = await getTimelineData();

	return timelineMonthly.map((timelineMonthlyItem) => ({
		params: { year: timelineMonthlyItem.year, month: timelineMonthlyItem.month },
		props: { timelineMonthlyItem, timelineYears },
	}));
}) satisfies GetStaticPaths;

type Props = InferGetStaticPropsType<typeof getStaticPaths>;
---

<TimelineMonthly {...Astro.props} />
