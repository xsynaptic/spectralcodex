---
import { FEATURE_IMAGE_PAGES } from 'astro:env/server';

import type { GetStaticPaths, InferGetStaticPropsType } from 'astro';

import { getImagesCollection } from '@/lib/collections/images/data';
import ImageEntry from '@/pages-layouts/image-entry.astro';

export const getStaticPaths = (async () => {
	if (!FEATURE_IMAGE_PAGES) return [];

	const { images } = await getImagesCollection();

	// TODO: add map data
	return images.map((image) => ({
		params: { id: image.id },
		props: { image },
	}));
}) satisfies GetStaticPaths;

type Props = InferGetStaticPropsType<typeof getStaticPaths>;
---

<ImageEntry {...Astro.props} />
